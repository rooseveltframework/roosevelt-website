<include src="layouts/main">
<arg pageTitle>Fallback dependencies — configuration</arg>
<arg pageId>fallback-dependencies-fallback-dependencies-—-configuration</arg>
<arg pageContent><article><h2 id="cloneaspecificversionofyourfallbackdependency">Clone a specific version of your fallback-dependency</h2>
<p>To version your fallback-dependencies, you should use git tags to stamp versions onto your commits. To clone a specific git tag, add <code>-b tag_name</code> to the URL, e.g. <code>"https://some.private.git.repo.somewhere -b 1.0.5"</code>. You also have the option to clone specific branch names commit IDs, providing enhanced control over your project's versions, e.g. <code>"https://some.private.git.repo.somewhere -b branch_name"</code> or <code>"https://some.private.git.repo.somewhere -b commit_id"</code>. In the case that a tag and branch have the same name, the tagged version will take precedence.</p>
<h2 id="fetchdevdependenciesofyourfallbackdependencies">Fetch devDependencies of your fallback-dependencies</h2>
<p>By default, <code>fallback-dependencies</code> will not install the <code>devDependencies</code> of a given repo that is cloned. If you want to do so for any repo, put it in a <code>fallbackDevDependencies</code> block instead of a <code>fallbackDependencies</code> block in your <code>package.json</code>.</p>
<h2 id="preventinstallingdependenciesoffallbackdependencies">Prevent installing dependencies of fallback-dependencies</h2>
<p>To skip installing dependencies for a specific fallback-dependency, add <code>-skip-deps</code> to the end of the URL string, e.g. <code>"https://some.private.git.repo.somewhere -b 1.0.5 -skip-deps"</code>.</p>
<h2 id="preventafallbackdependencyfrominstallingitsownfallbackdependencies">Prevent a fallback-dependency from installing its own fallback-dependencies</h2>
<p>To prevent a fallback-dependency from being installed in a situation where the repo is not a direct dependency of the root project, append the <code>:directOnly</code> flag to the end of the dependency name, e.g. <code>"some-private-dependency:directOnly": [ ... ]</code>. This will prevent repos with nested fallback-dependencies from installing their own fallback-dependencies.</p>
<h2 id="letusersprioritizeurllistdifferently">Let users prioritize URL list differently</h2>
<p>To move a preferred domain up to the top of the list of fallback-dependencies to try regardless of the order specified in the app's config, set the environment variable <code>FALLBACK_DEPENDENCIES_PREFERRED_WILDCARD</code> to a string to match in the URL list.</p>
<h2 id="runnpmcionalreadyclonedrepos">Run <code>npm ci</code> on already cloned repos</h2>
<p>To run <code>npm ci</code> on clones even if they already exist, set the environment variable <code>FALLBACK_DEPENDENCIES_RERUN_NPM_CI</code> to <code>true</code> or set <code>rerunNpmCi</code> in <code>fallbackDependencies</code> package.json config.</p>
<h2 id="addargumentstonpmci">Add arguments to <code>npm ci</code></h2>
<p>To include additional arguments to pass to the <code>npm ci</code> command, set the environment variable, <code>FALLBACK_DEPENDENCIES_NPM_CI_ARGS</code> to a string separating each argument with a space, e.g. <code>--no-audit --silent</code>, or an array of strings, e.g. <code>['--no-audit', --silent]</code> or set <code>npmCiArgs</code> in <code>fallbackDependencies</code> package.json config.</p>
<h2 id="removestaledirectoriesfromdependencytargetfolder">Remove stale directories from dependency target folder</h2>
<p>To remove stale directories from the dependency target folder, set the environment variable <code>FALLBACK_DEPENDENCIES_REMOVE_STALE_DIRECTORIES</code> to <code>true</code> or set <code>removeStaleDirectories</code> in <code>fallbackDependencies</code> package.json config.</p></article></arg></include>